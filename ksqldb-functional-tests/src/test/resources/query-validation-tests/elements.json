{
  "tests": [
    {
      "name": "test bug",
      "statements": [
        "CREATE STREAM INPUT WITH (kafka_topic='input', value_format='JSON_SR');",
        "CREATE STREAM OUTPUT WITH(PARTITIONS = 4) as SELECT * FROM input;"
      ],
      "topics": [
        {
          "name": "input",
          "valueSchema": {
            "properties": {
              "products": {
                "type": "array",
                "description": "the description",
                "items": {
                  "$ref": "#/$definitions/products"
                }
              }
            },
            "$definitions": {
              "products": {
                "title": "the title",
                "type": "object",
                "anyOf": [
                  {
                    "type": "object",
                    "properties": {
                      "keycode": {
                        "type": "string"
                      }
                    }
                  },
                  {
                    "type": "object",
                    "properties": {
                      "itemCode": {
                        "type": "string"
                      }
                    }
                  }
                ]
              }
            }
          },
          "valueFormat": "JSON_SR"
        },
        {
          "name": "OUTPUT",
          "valueFormat": "JSON",
          "partitions": 4
        }
      ],
      "inputs": [{"topic": "input", "value": {"products": [{"keycode":  "secret"}]}}],
      "outputs": [{"topic": "OUTPUT", "value": {"PRODUCTS": [{"IO.CONFLUENT.CONNECT.JSON.ONEOF.FIELD.0":  {"KEYCODE": "secret"}}, {"IO.CONFLUENT.CONNECT.JSON.ONEOF.FIELD.1":  null}]}}]
    }
  ]
}
